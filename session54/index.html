<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- 
        Promise: sinh ra giải quyết các tác vụ bất đồng bộ giúp việc
        giải quyết bất đồng bộ mà bị callback-hell (dùng callback)
        code nhìn gọn gằng hơn, dễ chỉnh sửa, bảo trì hơn
        Promise sinh ra ở phiên bản ES6-2015
        1.Cú pháp
        let pomise = new Promise();
        // khởi tạo đối tượng promise từ contructor
        // đối số của new Promise nhận vào 1 cái hàm
        trong hàm này nhận vào 2 tham số
        1. resolve : giải quyết-thành công
        2.reject : từ chối- thất bại 
     -->
        <script>
            // khởi tạo 1 promise 
            let promise = new Promise(()=>{
                // viết logic sử lý code
                // nếu logic thành công thì gọi resolve ==> nhảy vào .then
                // nếu logic thất bại thì gọi reject ==> nhảy vào .catch
                // resolve([1,2,3]);
                // những tác vụ gọi server, tương tác database
               
                reject('có lỗi')
            })
            // khi khởi tạo 1 promise thì nó đang ở trạng thái pending(chở xử lý)
            //console.log("promise",promise);
             // bên trong phương thức .then thì có nhiêu .then khác, kết quả trả về là tham số đầu vào của then sau
            promise
            .them(()=>{
                console.log('Khi thành công trả về dữ liệu')
            })
            .catch(()=>{
                console.log('khi thất bại báo lỗi!')
            })
            
            
            .then(()=>{
                return new Promise((resolve,reject)=>{
                    setTimeout(()=>{
                        console.log('111')
                        resolve();
                    },1000)
                })
            })
            newPromise
            .then(()=>{
                return new Promise((resolve,reject)=>{
                    setTimeout(()=>{
                        console.log('222')
                        resolve();
                    },1000)
                })
            })
            .then(()=>{
                return new Promise((resolve,reject)=>{
                    setTimeout(()=>{
                        console.log('333')
                        resolve();
                    },1000)
                })
            })
            
        </script>
</body>
</html>